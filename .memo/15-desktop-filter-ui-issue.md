# Desktop Filter UI Issue - PC版Filtersの問題

## 問題の状況

ユーザーからの報告：

- モバイル端末では想定通り表示・動作している
- PCから見たときにFiltersのUIがおかしく、ボタンも正しく動作していない

## 問題の詳細分析

### 現在の状況

1. **デスクトップでもモバイル用のモーダル形式が表示される**

   - 本来デスクトップではボタン下のドロップダウン形式であるべき
   - 現在は70%高さのコンパクトモーダルが表示されている

2. **暗いオーバーレイ背景が表示される**

   - デスクトップでは不要な半透明の背景オーバーレイが表示
   - モバイル専用の機能がデスクトップでも動作

3. **フィルター機能は動作している**
   - セレクトボックスの選択は可能
   - フィルタリング自体の機能に問題はない

### 根本原因

- CSS Media Queryの優先度問題
- モバイル用のスタイル（position: fixed, overlay背景）がデスクトップでも適用
- デスクトップ用の本来のドロップダウンスタイルが上書きされている

## 正しい動作仕様

### デスクトップ (>768px)

- **表示形式**: フィルターボタンの下に小さなドロップダウン
- **位置**: `position: absolute` でボタンの下に配置
- **背景**: オーバーレイなし、ドロップダウンボックスのみ
- **サイズ**: `min-width: 400px` の小さなボックス

### モバイル (≤768px)

- **表示形式**: 70%高さのコンパクトモーダル
- **位置**: `position: fixed` で画面中央
- **背景**: 半透明オーバーレイあり
- **サイズ**: 画面幅の90%、高さ70%

## 修正が必要な箇所

### CSS修正項目

1. **デスクトップ用 .expandedFilters のリセット**

   - position: absolute (not fixed)
   - オーバーレイ背景の削除
   - 元のドロップダウンスタイルの復元

2. **Media Query整理**
   - モバイル専用スタイルの適切な分離
   - デスクトップのベーススタイル保護

### 実装方針

1. デスクトップ用とモバイル用のスタイルを明確に分離
2. Media Queryでモバイル専用上書きを適用
3. デスクトップのベーススタイルを保護

## 現在の修正試行

### 試行1: !important追加

- モバイル用スタイルに!important追加
- **結果**: 効果なし、デスクトップでも同じモーダル表示

### 試行2: オーバーレイの無効化

- デスクトップで .filterOverlay を display: none
- **結果**: 部分的改善、まだモーダル形式

### 現在の状況

- フィルター機能は動作するが、UI表示が不適切
- デスクトップユーザーの体験が悪い
- さらなる修正が必要

## 次のアクション

1. CSS Media Queryの完全な見直し
2. デスクトップ用ベーススタイルの明確な定義
3. モバイル専用上書きの適切な分離
4. テスト確認（デスクトップ・モバイル両方）

## 影響範囲

- デスクトップユーザーのFilter機能使用体験
- UI一貫性とユーザビリティ
- レスポンシブデザインの品質
