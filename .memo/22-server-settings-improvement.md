# サーバー設定関連画面の改善 - Server Settings Improvement

## 対象コンポーネント

### メインコンポーネント

- `/src/app/(authenticated)/servers/[id]/page.tsx` - サーバー詳細画面（タブ管理）

### 各タブコンポーネント

1. **Settings タブ**

   - `/src/components/server/server-settings.tsx`
   - `/src/components/server/server-settings.module.css`

2. **Properties タブ**

   - `/src/components/server/server-properties.tsx`
   - `/src/components/server/server-properties.module.css`

3. **Backups タブ**
   - `/src/components/server/server-backups.tsx`
   - `/src/components/server/server-backups.module.css`

## 現状分析

### タブ切り替えシステム

- URLパラメータ（`?tab=settings`）でタブ状態管理
- ブラウザ履歴に対応
- Next.js App Routerの`useSearchParams`を活用

### 各タブの主要機能

#### Settings タブ

- **機能**: サーバー基本情報編集、プレイヤーグループ管理
- **UIエレメント**: フォーム、グループタグ、インラインモーダル
- **特徴**: AttachGroupModalでグループ選択とプライオリティ設定

#### Properties タブ

- **機能**: `server.properties`ファイル編集
- **UIエレメント**: 動的フィールド、プロパティグリッド
- **特徴**: 型に応じた入力コントロール（text/number/boolean）

#### Backups タブ

- **機能**: バックアップ作成・管理・復元
- **UIエレメント**: ドロップダウンメニュー、アクションボタン
- **特徴**: ファイルダウンロード、復元確認フロー

## 改善検討項目

### 1. タブ切り替えUI

**現状の課題**:

- タブボタンのモバイル対応が不十分
- アクティブタブの視覚的強調が弱い
- タブが多い場合の横スクロール対応が必要

**改善案**:

- モバイルでのタブスクロール対応
- アクティブインジケーターの強化
- タブアイコンの追加検討

### 2. Settings タブ

**現状の課題**:

- フォームレイアウトがPC/モバイルで最適化不足
- グループ管理UIの視認性
- バリデーション表示の改善余地

**改善案**:

- 2カラム→1カラムのレスポンシブ対応
- グループタグの表示改善
- インラインバリデーション強化

### 3. Properties タブ

**現状の課題**:

- プロパティグリッドのモバイル表示
- 大量プロパティでの検索性
- 高度な設定項目の分類

**改善案**:

- カテゴリー別グループ化
- 検索・フィルター機能
- モバイル向けアコーディオン形式

### 4. Backups タブ

**現状の課題**:

- ドロップダウンメニューのモバイル対応
- バックアップリストの表示密度
- 大容量ファイルのダウンロード体験

**改善案**:

- カード型レイアウトへの変更
- プログレス表示の改善
- バックアップサイズでの並び替え

## 作業計画

### Phase 1: 現状スクリーンショット取得 ✅

- [x] Settings タブ（デスクトップ・モバイル）
- [x] Properties タブ（デスクトップ・モバイル）
- [x] Backups タブ（デスクトップ・モバイル）
- [x] タブ切り替え動作確認

### Phase 2: Settings タブ改善 🚧

**スクリーンショット分析完了**:

- **デスクトップ版問題**: 左右カラムの比率不適切、グループ管理セクションの視認性低下
- **モバイル版問題**: アクションボタンが小さい、Read-Only Informationの圧迫

**ユーザー要望反映**:

- ✅ グループ管理とサーバー設定の分離
- ✅ Read-Only Informationの削除

**実装完了**:

- [x] Read-Only Information削除（344-368行）
- [x] Player Groups セクション削除（371-448行）
- [x] AttachGroupModal削除
- [x] 不要なstate・effects・imports削除
- [x] CSS変数統一とテーマ対応
- [x] レスポンシブレイアウト改善
- [x] Better touch targets（44px minimum）
- [x] アクセシビリティ改善
- [x] テスト・検証完了

### 改善前後の比較

#### デスクトップ版

- **改善前**: 複雑な2カラムレイアウト、Read-Only情報の圧迫、グループ管理の視認性低下
- **改善後**: 簡潔な1カラムレイアウト、サーバー設定に集中、余白の改善

#### モバイル版

- **改善前**: 画面スペースの圧迫、小さなアクションボタン、スクロール量過多
- **改善後**: 効率的な画面利用、タッチフレンドリーな要素、スクロール削減

### 技術的改善

- CSS変数による統一されたテーマシステム
- Better touch targetsの実装（44px以上）
- レスポンシブブレークポイントの最適化
- アニメーション設定の改善（prefers-reduced-motion対応）

### Phase 3: Properties タブ改善

- [ ] UI改善案の詳細検討
- [ ] カテゴリー分類システム実装
- [ ] モバイル対応改善
- [ ] テスト・検証

### Phase 4: Backups タブ改善

- [ ] UI改善案の詳細検討
- [ ] カード型レイアウト実装
- [ ] モバイル対応改善
- [ ] テスト・検証

### Phase 5: 全体統合とテスト

- [ ] 3つのタブの統一性確認
- [ ] タブ切り替えUI改善
- [ ] 総合テスト
- [ ] ドキュメント更新

## Settings タブ具体的改善内容

### 構造変更

1. **Read-Only Information削除**

   - 344-368行の`readOnlySection`を完全削除
   - バージョン、タイプ、ポート、作成日の表示を除去

2. **グループ管理の分離**

   - Player Groupsセクション（371-448行）を別コンポーネント化
   - 独立したUI構造とスタイリング

3. **レイアウト簡素化**
   - 基本情報とサーバーリソースのみに焦点
   - 2カラムレイアウトから1カラムへの最適化

### UI改善

1. **フォーム要素統一**

   - 全入力フィールドのmin-height: 44px
   - 一貫したパディングとマージン
   - CSS変数によるテーマ対応

2. **レスポンシブ対応強化**
   - モバイル対応のタッチターゲット
   - 適切な余白とスペーシング
   - フレクシブルレイアウト
