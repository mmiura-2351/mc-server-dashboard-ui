# Desktop Filter UI Fix Plan - PC版Filtersの修正計画

## 修正方針

### 問題の明確化

1. **現在の状況**: デスクトップでもモバイル用のコンパクトモーダル（70%高さ）が表示される
2. **正しい動作**: デスクトップではフィルターボタンの下に小さなドロップダウンボックス
3. **影響**: デスクトップユーザーの使い勝手が悪い

### 修正戦略

#### 1. CSS構造の分析と理解

- 現在の `.expandedFilters` スタイルを確認
- Media Query内でのオーバーライド状況を把握
- デスクトップとモバイルのスタイル競合を特定

#### 2. デスクトップ用ベーススタイルの復元

- デスクトップ用の元々の小さなドロップダウンスタイルを設定
- `position: absolute` での配置
- `min-width: 400px` の適切なサイズ
- オーバーレイ背景の除去

#### 3. モバイル専用スタイルの分離

- Media Query内でのみモバイル用スタイルを適用
- `position: fixed`, 70%高さ, オーバーレイ背景はモバイルのみ

#### 4. テストとスクリーンショット確認

- デスクトップ (1280x720) でのドロップダウン形式確認
- モバイル (375x667) でのコンパクトモーダル確認
- 両方での機能動作確認

## 作業手順

### Step 1: 現在のCSS状況分析

- `server-dashboard.module.css` の `.expandedFilters` 関連部分を確認
- Media Query構造の理解

### Step 2: デスクトップ用ベーススタイル定義

```css
/* Desktop base style - small dropdown */
.expandedFilters {
  position: absolute;
  top: 100%;
  left: 0;
  right: 0;
  background: white;
  border: 1px solid #d1d5db;
  border-radius: 8px;
  box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
  padding: 1rem;
  margin-top: 0.5rem;
  z-index: 10;
  min-width: 400px;
}
```

### Step 3: モバイル専用オーバーライド

```css
@media (max-width: 768px) {
  .expandedFilters {
    position: fixed;
    top: 15%;
    left: 5%;
    right: 5%;
    max-height: 70vh;
    /* モバイル専用スタイル */
  }
}
```

### Step 4: オーバーレイ背景の適切な制御

- デスクトップでは `.filterOverlay` を非表示
- モバイルでのみ表示

### Step 5: 確認手順

1. デスクトップサイズ (1280x720) でFiltersボタンクリック
2. 小さなドロップダウンが表示されることを確認
3. モバイルサイズ (375x667) でFiltersボタンクリック
4. コンパクトモーダルが表示されることを確認
5. 両方でフィルター機能が正常動作することを確認

## 期待される結果

### デスクトップ (>768px)

- ✅ 小さなドロップダウンボックス表示
- ✅ オーバーレイ背景なし
- ✅ フィルターボタンの真下に配置
- ✅ フィルター機能正常動作

### モバイル (≤768px)

- ✅ 70%高さのコンパクトモーダル
- ✅ 半透明オーバーレイ背景あり
- ✅ 画面中央配置
- ✅ フィルター機能正常動作

## 重要ポイント

1. **CSS優先度の管理**: Media Query内での適切なオーバーライド
2. **レスポンシブ一貫性**: 既存のモバイル動作を維持
3. **機能保持**: フィルタリング機能は影響を受けないよう注意
4. **スクリーンショット確認**: 修正前後の比較必須

次のステップ: CSS分析から開始
