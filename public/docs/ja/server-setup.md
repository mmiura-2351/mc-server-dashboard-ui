# サーバー設定ガイド

このガイドでは、ダッシュボードを通じてマインクラフトサーバーを設定・構成する完全なプロセスをカバーします。

## 前提条件

サーバーを設定する前に、以下を確認してください：

- ダッシュボードへの管理者アクセス
- 十分なシステムリソース（RAM、CPU、ストレージ）
- マインクラフトクライアント用のネットワークアクセス
- サーバーに必要なJavaバージョンのインストール

## サーバータイプ

### Vanillaサーバー

公式マインクラフトサーバー：

- **利点**: 公式サポート、安定、シンプル
- **欠点**: 機能制限、プラグインなし
- **推奨用途**: 基本的なサバイバルサーバー、小規模グループ

### Paperサーバー

パフォーマンス最適化マインクラフトサーバー：

- **利点**: 高性能、プラグインサポート、バグ修正
- **欠点**: Vanillaとわずかに異なる動作
- **推奨用途**: 中〜大規模サーバー、プラグインベースサーバー

### Forgeサーバー

MOD対応マインクラフトサーバー：

- **利点**: フルMODサポート、広範囲なカスタマイズ
- **欠点**: より複雑、高リソース使用量
- **推奨用途**: MODゲームプレイ、カスタム体験

## 初回サーバー作成

### ステップ1: 基本設定

1. **サーバー** → **新しいサーバーを作成** に移動
2. サーバー詳細を入力：
   - **サーバー名**: 説明的な名前を選択
   - **サーバータイプ**: Vanilla、Paper、Forgeから選択
   - **ポート**: デフォルト25565（必要に応じて変更）
   - **メモリ**: RAM割り当て（最低2GB推奨）

### ステップ2: ワールド設定

ワールド設定を構成：

- **ワールド名**: カスタムワールド名
- **シード**: オプションのワールドシード
- **ゲームモード**: サバイバル、クリエイティブ、アドベンチャー、スペクテイター
- **難易度**: ピースフル、イージー、ノーマル、ハード
- **ワールドタイプ**: デフォルト、フラット、大きなバイオームなど

### ステップ3: サーバープロパティ

設定すべき主要なサーバー設定：

```properties
# 基本設定
server-port=25565
max-players=20
difficulty=normal
gamemode=survival

# ワールド設定
level-name=world
level-seed=
generate-structures=true
spawn-protection=16

# ネットワーク設定
online-mode=true
white-list=false
enable-command-block=false

# パフォーマンス設定
view-distance=10
simulation-distance=10
```

## 高度な設定

### パフォーマンスチューニング

より良いパフォーマンスのためにサーバーを最適化：

1. **メモリ割り当て**:

   - 最低2GBから開始
   - プレイヤー10人あたり1GB追加
   - 使用量を監視して調整

2. **描画距離**:

   - デフォルト: 10チャンク
   - パフォーマンス向上のため削減
   - パフォーマンスとゲームプレイのバランス

3. **シミュレーション距離**:
   - レッドストーン/モブの行動範囲を制御
   - 低い値でパフォーマンス向上
   - ゲームプレイメカニクスに影響

### セキュリティ設定

サーバーのセキュリティ確保：

1. **ホワイトリスト**: プライベートサーバーで有効化
2. **オンラインモード**: プレイヤーアカウントの確認
3. **スポーン保護**: スポーンエリアの保護
4. **コマンドブロック**: セキュリティのため無効化

### プラグイン設定（Paper/Forge）

Paperサーバーの場合：

1. **ファイル** → **plugins** に移動
2. プラグインJARファイルをアップロード
3. プラグイン読み込みのためサーバー再起動
4. 各フォルダでプラグイン設定を構成

Forgeサーバーの場合：

1. **ファイル** → **mods** に移動
2. MOD JARファイルをアップロード
3. クライアント-サーバーMOD互換性を確認
4. 必要に応じてMOD設定を構成

## ネットワーク設定

### ポート設定

デフォルトマインクラフトポート: `25565`

ポート変更時：

1. server.propertiesの`server-port`を更新
2. ファイアウォールルールを設定
3. ポートフォワーディングを更新（該当する場合）
4. プレイヤーに新しいポートを通知

### ファイアウォール設定

これらのポートが開いていることを確認：

- **25565**: マインクラフトサーバー（またはカスタムポート）
- **8000**: ダッシュボードAPI（外部アクセスが必要な場合）

## ファイル管理

### 重要なディレクトリ

```
server/
├── world/              # メインワールドファイル
├── world_nether/       # ネザーディメンション
├── world_the_end/      # エンドディメンション
├── plugins/            # Paperプラグイン
├── mods/              # Forge MOD
├── logs/              # サーバーログ
├── backups/           # バックアップファイル
└── server.properties  # メイン設定
```

### 設定ファイル

理解すべき主要ファイル：

1. **server.properties**: メインサーバー設定
2. **ops.json**: サーバーオペレーターリスト
3. **whitelist.json**: ホワイトリストプレイヤー
4. **banned-players.json**: BANされたプレイヤーリスト
5. **banned-ips.json**: BANされたIPアドレス

## バックアップ戦略

### 自動バックアップ

定期バックアップの設定：

1. **サーバー** → **バックアップ** に移動
2. バックアップスケジュールを設定
3. バックアップ範囲を選択：
   - **ワールドのみ**: 高速、小サイズ
   - **フルサーバー**: 完全サーバーバックアップ

### 手動バックアップ

以下の前にバックアップを作成：

- 主要な設定変更
- プラグイン/MODアップデート
- ワールド変更
- サーバーバージョン更新

### 復元プロセス

バックアップの復元：

1. サーバーを停止
2. リストからバックアップを選択
3. 「復元」をクリック
4. 復元を確認
5. サーバーを開始

## 監視とメンテナンス

### サーバーログ

ログを通じてサーバーの健全性を監視：

- **Latest.log**: 現在のセッションログ
- **エラーログ**: 重大な問題
- **パフォーマンスログ**: TPSとメモリ使用量

### パフォーマンス指標

これらの指標を監視：

- **TPS（Ticks Per Second）**: 20であるべき
- **メモリ使用量**: リークを監視
- **プレイヤー数**: サーバー負荷を追跡
- **チャンク読み込み**: ワールド生成の最適化

### 定期メンテナンス

定期的に実行するタスク：

1. **週次**:

   - サーバーログの確認
   - パフォーマンス指標のチェック
   - 古いファイルの清理

2. **月次**:

   - サーバーソフトウェアの更新
   - プラグイン/MODの確認と更新
   - 重要なデータのバックアップ

3. **必要に応じて**:
   - パフォーマンス向上のためのサーバー再起動
   - 設定の更新
   - プレイヤー問題の対処

## 一般的な設定例

### サバイバルサーバー

```properties
gamemode=survival
difficulty=normal
spawn-monsters=true
spawn-animals=true
pvp=true
enable-command-block=false
```

### クリエイティブサーバー

```properties
gamemode=creative
difficulty=peaceful
spawn-monsters=false
pvp=false
enable-command-block=true
```

### ハードコアサーバー

```properties
gamemode=survival
difficulty=hard
hardcore=true
max-players=10
white-list=true
```

## 設定問題のトラブルシューティング

### サーバーが起動しない

1. Java バージョン互換性を確認
2. メモリ割り当てを確認
3. エラーのサーバーログを確認
4. ファイル権限を確認

### 接続問題

1. ポート設定を確認
2. ファイアウォール設定を確認
3. ローカル vs 外部アクセスをテスト
4. server.properties設定を検証

### パフォーマンス問題

1. 描画距離を削減
2. プレイヤー数を制限
3. ワールド生成を最適化
4. プラグイン/MODパフォーマンスを監視

## 次のステップ

設定後：

1. サーバー接続をテスト
2. プレイヤーグループを設定
3. 監視を設定
4. バックアップスケジュールを作成
5. サーバー設定を文書化

---

_最終更新: 2025年6月20日_
