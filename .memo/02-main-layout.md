# レイアウトコンポーネント（main-layout.tsx）のレスポンシブ対応

## 実施日: 2025-06-26

## 変更前の状態

- 横型のナビゲーションバーのみ
- モバイルでは横スクロールが発生し使いづらい
- ハンバーガーメニューなし
- レスポンシブ対応が不完全

## 実施した変更

### 1. TypeScript/React側の変更

- **モバイルメニューの状態管理**: `useState`でメニューの開閉状態を管理
- **自動クローズ機能**: ルート変更時にメニューを自動的に閉じる
- **ESCキー対応**: ESCキーでメニューを閉じる機能を追加
- **ハンバーガーメニューボタン**: モバイル用のメニューボタンを追加
- **モバイル専用ナビゲーション**: スライドイン型のドロワーメニューを実装
- **背景オーバーレイ**: メニュー開時の背景クリックでメニューを閉じる

### 2. CSS側の変更

- **CSS変数の活用**: globals.cssで定義した変数を全面的に使用
- **モバイルファーストアプローチ**: 基本はモバイル表示、768px以上でデスクトップ表示
- **ハンバーガーアニメーション**: 3本線のハンバーガーアイコンを実装
- **スライドインアニメーション**: `transition`でスムーズなメニュー表示
- **改善されたスペーシング**: CSS変数を使用した一貫性のあるスペーシング
- **シャドウとブラー効果**: より洗練されたUIのための視覚効果

### 3. レスポンシブブレークポイント

- **モバイル**: < 768px（ハンバーガーメニュー表示）
- **タブレット**: 768px - 1024px（縦型ナビゲーション）
- **デスクトップ**: > 1024px（横型ナビゲーション、最適なパディング）

## レスポンシブ対応の詳細

### モバイル（< 768px）

- ハンバーガーメニューボタンを表示
- デスクトップナビゲーション・ユーザー情報を非表示
- スライドイン型のドロワーメニュー（右から左へ）
- フルスクリーン幅のメニュー（480px以下）
- メニュー項目は縦に配置
- タップしやすい大きめのボタン

### タブレット（768px - 1024px）

- デスクトップ型のナビゲーションを表示
- ハンバーガーメニューを非表示
- ナビゲーション項目を縦に配置してスペースを節約

### デスクトップ（> 1024px）

- フル機能のナビゲーションバー
- 横型のナビゲーション項目配置
- 最大幅制限（1536px）で大画面でも見やすく

## アクセシビリティの改善

- `aria-label`属性をメニューボタンに追加
- キーボード操作（ESCキー）のサポート
- フォーカス管理の改善

## 修正された問題

- **480px以下でのメニュー表示問題**: CSSの詳細度の問題を修正。メディアクエリ内で`mobileNavOpen`クラスの`right: 0`を再定義することで解決。

## 動作確認済み

- **375px（モバイル）**: ハンバーガーメニューが正常に動作
- **768px（タブレット）**: デスクトップナビゲーションが表示、メニューボタンは非表示
- **1280px（デスクトップ）**: フル機能のナビゲーションバー

## 今後の改善点

- メニューアイコンのアニメーション（ハンバーガー→×）
- スワイプジェスチャーでのメニュー開閉
- タブレット向けの最適化（サイドバー型ナビゲーション）
- ダークモード時のカラー調整
- アクティブページのより明確な表示
